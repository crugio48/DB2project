<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8"> 
    <link rel="stylesheet" type="text/css" media="all" href="../../css/flex.css" th:href="@{/css/flex.css}" />
    <link rel="stylesheet" type="text/css" media="all" href="../../css/tables.css" th:href="@{/css/tables.css}" />
    <title>Customer Home Page</title>
</head>

<body>
	<h1 th:if="${session.customer}" th:text="${'Welcome ' + session.customer.username + ' this is the home page'}">Home page</h1>
	
	<div align="right"> <a href="Logout">Logout</a> </div>   <!-- make 2 custom links if user is logged or not -->
	
	<div class = "container">  <!-- flex container div -->
	
	<div class = "left">  <!-- left part of flex for the service packages -->
		
		<table>
			<thead>
				<tr>
					<th>List of Service Packages available</th>
				</tr>
			</thead>
			
			<tbody>
				<tr th:each="p : ${servicePackages}">      <!-- one row for every service package -->
					<td th:text="${p.name}"> [servicePackage name]</td>
					<td>
						<div>Services included:</div>
						<table th:each="s : ${p.services}">  <!-- one table for every service in the package-->
							<thead>
								<tr>
									<th>Service Type</th>
									<th th:unless="${s.type == 'fixed phone'}">Parameters</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td th:text="${s.type}">[service type]</td>
									<td th:if="${s.type == 'mobile phone'}">
										<div th:text="${'Minutes: ' + s.mobilePhone.n_minutes}"></div>
										<div th:text="${'SMS: ' + s.mobilePhone.n_sms}"></div>
										<div th:text="${'Fee for extra minutes: ' + s.mobilePhone.fee_extra_minutes + ' euro/minute'}"></div>
										<div th:text="${'Fee for extra sms: ' + s.mobilePhone.fee_extra_sms + ' euro/sms'}"></div>
									</td>
									<td th:if="${s.type == 'fixed internet' || s.type == 'mobile internet'}">
										<div th:text="${'Gigabytes: ' + s.mobileAndFixedInternet.n_giga}"></div>
										<div th:text="${'Fee for extra gigabytes: ' + s.mobileAndFixedInternet.fee_extra_giga + ' euro/gigabyte'}"></div>
									</td>
								</tr>
							
							</tbody>
							
						</table>
						
						<table th:unless="${p.optionalProducts.isEmpty()}">  <!-- one table for the optional products of the service-->
							<thead>
								<tr>
									<th>Optional products available:</th>
									<th>Extra fee</th>
									
								</tr>
							</thead>
							<tbody>
								
								<tr th:each="o : ${p.optionalProducts}">
									<td th:text="${o.name}">no optional products available</td>
									<td th:text="${o.monthly_fee + ' euro/month'}"></td>
								</tr>
							
							</tbody>
						
						</table>
					</td>
				
				
				</tr>
			
			</tbody>
		
		
		</table>
		
	
	</div>
	
	<div class = "right">  <!-- right part of flex for the validity periods ang go to buy a service button -->
		<div>Validity periods available:</div>
		<table>
			<thead>
				<tr> 
					<th> ID </th>
					<th> Duration </th>
					<th> Monthly Cost</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="v : ${validityPeriods}"> 
					<td th:text = "${v.validity_period_id}"> 25 </td>
					<td th:text = "${v.duration + ' months'}"> 5 months </td> 
					<td th:text = "${v.monthly_fee + ' euro'}"> 1000â‚¬ </td>
				</tr>
				
			</tbody>
		</table>
		
		<br><br><br>  <!-- blank space -->
		<div>
			<div>Click here if you want to purchase a service package</div>
			<a th:href="@{/GoToBuyService(servicePackageId=${servicePackages[0].service_package_id})}"> <button type="button">Buy a service package</button></a>
		</div>
	
	
	</div>
	
	
	</div>

	
</body>
</html>